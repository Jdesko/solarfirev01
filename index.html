<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor Usina Solar - Login</title>
    <style>
        /* Seus estilos atuais permanecem os mesmos */
    </style>
</head>
<body>
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <h2>Acesso Restrito</h2>
            <input type="text" id="username" class="login-input" placeholder="Usuário" required>
            
            <div class="password-container">
                <input type="password" id="password" class="login-input" placeholder="Senha" required>
                <button type="button" class="show-password" id="togglePassword" aria-label="Mostrar senha">👁️</button>
            </div>
            
            <button class="login-btn" id="loginBtn">Entrar</button>
            <div id="loginError" class="error-login"></div>
        </div>
    </div>

    <!-- Adicione o Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Configuração do Firebase (substitua com suas credenciais)
        const firebaseConfig = {
            apiKey: "AIzaSyD1m0_V8sdXhQueR-8llIXB489cpoM8vBU",
  authDomain: "solarfirebase-bb98f.firebaseapp.com",
  databaseURL: "https://solarfirebase-bb98f-default-rtdb.firebaseio.com",
  projectId: "solarfirebase-bb98f",
  storageBucket: "solarfirebase-bb98f.firebasestorage.app",
  messagingSenderId: "480963796966",
  appId: "1:480963796966:web:47dbaf360f269af2dcc027",
  measurementId: "G-QSRE1XPK4S"
        };

        // Inicialize o Firebase
        firebase.initializeApp(firebaseConfig);

        // Sistema de Login
        const auth = {
            elements: {
                overlay: document.getElementById('loginOverlay'),
                username: document.getElementById('username'),
                password: document.getElementById('password'),
                loginBtn: document.getElementById('loginBtn'),
                togglePassword: document.getElementById('togglePassword'),
                errorMsg: document.getElementById('loginError')
            },
            
            init: function() {
                this.setupEvents();
                this.checkAuth();
            },
            
            setupEvents: function() {
                this.elements.loginBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.login();
                });
                
                this.elements.togglePassword.addEventListener('click', () => {
                    this.togglePasswordVisibility();
                });
                
                this.elements.password.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.login();
                    }
                });
            },
            
            togglePasswordVisibility: function() {
                const passwordField = this.elements.password;
                const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordField.setAttribute('type', type);
                this.elements.togglePassword.textContent = type === 'password' ? '👁️' : '🔒';
            },
            
            checkAuth: function() {
                firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                        window.location.href = 'casaze.html';
                    }
                });
            },
            
            login: function() {
                const email = this.elements.username.value.trim() + "@solar.com"; // Adiciona domínio fictício
                const password = this.elements.password.value.trim();
                
                firebase.auth().signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        window.location.href = 'casaze.html';
                    })
                    .catch((error) => {
                        this.elements.errorMsg.textContent = "Credenciais inválidas!";
                        this.elements.password.value = '';
                    });
            }
        };

        document.addEventListener('DOMContentLoaded', () => auth.init());
    </script>
</body>
</html>